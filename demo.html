<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>é€ä½ ç‚¹å°æƒŠå–œ ğŸ‰</title>
  <style>
    html,body{height:100%;margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial}
    body{display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0f172a,#0b1220);color:#fff}
    .card{width:92vw;max-width:560px;padding:22px;border-radius:18px;background:linear-gradient(135deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));backdrop-filter:blur(4px);box-shadow:0 10px 30px rgba(2,6,23,0.6);text-align:center}
    h1{font-size:clamp(22px,6vw,36px);margin:0 0 8px}
    p{margin:0 0 16px;color:rgba(255,255,255,0.9)}
    .big{font-size:clamp(36px,12vw,72px);line-height:1;margin-bottom:8px}
    button{padding:10px 14px;border-radius:10px;border:0;background:linear-gradient(90deg,#ff6b6b,#f59e0b);color:#111;font-weight:700;font-size:16px}
    .hint{font-size:12px;color:rgba(255,255,255,0.6);margin-top:10px}
    canvas{position:fixed;left:0;top:0;pointer-events:none}
    .sparkle{width:10px;height:10px;background:radial-gradient(circle,#fff,rgba(255,255,255,0));border-radius:50%;position:absolute;opacity:0}
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <div class="card">
    <div class="big" id="emoji">âœ¨</div>
    <h1 id="title">ç»™ä½ ä¸€ä¸ªå°æƒŠå–œ</h1>
    <p id="sub">æŠŠå±å¹•ç‚¹ä¸€ä¸‹ï¼Œå½©å¸¦ä¼šé£ï¼Œæ–‡å­—ä¼šè·³ â€”â€” ä¹Ÿè®¸è¿˜èƒ½è®©æˆ‘çŸ¥é“ä½ ç¬‘äº† ğŸ˜Š</p>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
      <button id="party">å¼€ä¸ªå°æ´¾å¯¹ ğŸ‰</button>
      <button id="toggle">åˆ‡æ¢é£æ ¼ ğŸŒˆ</button>
    </div>
    <div class="hint">ä¿å­˜ä¸º .html æ–‡ä»¶ç›´æ¥å‘ç»™æœ‹å‹ï¼Œæˆ–æŠŠé“¾æ¥å‘ä»–ä»¬åœ¨æ‰‹æœºæµè§ˆå™¨æ‰“å¼€ã€‚</div>
  </div>

  <script>
    // mobile friendly canvas confetti
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = innerWidth;
    let h = canvas.height = innerHeight;
    addEventListener('resize',()=>{w=canvas.width=innerWidth; h=canvas.height=innerHeight});

    function rand(a,b){return a + Math.random()*(b-a)}
    class Piece{
      constructor(){
        this.x = rand(0,w); this.y = rand(-20,h/2);
        this.vx = rand(-2,2); this.vy = rand(1,6);
        this.size = rand(6,14);
        this.color = `hsl(${~~rand(0,360)},90%,60%)`;
        this.rotation = rand(0,360); this.spin = rand(-0.2,0.2);
      }
      update(){ this.x += this.vx; this.y += this.vy; this.vy += 0.05; this.rotation += this.spin; }
      draw(){
        ctx.save(); ctx.translate(this.x,this.y); ctx.rotate(this.rotation);
        ctx.fillStyle = this.color; ctx.fillRect(-this.size/2,-this.size/2,this.size,this.size*0.6);
        ctx.restore();
      }
    }
    let pieces = [];
    function spawn(n, x=null, y=null){ for(let i=0;i<n;i++){ let p=new Piece(); if(x!==null){p.x = x + rand(-30,30); p.y = y + rand(-10,10);} pieces.push(p);} }
    function frame(){ ctx.clearRect(0,0,w,h); for(let i=pieces.length-1;i>=0;i--){let p=pieces[i]; p.update(); p.draw(); if(p.y>h+50) pieces.splice(i,1);} requestAnimationFrame(frame); }
    frame();

    // simple typewriter
    const title = document.getElementById('title');
    const emojiBox = document.getElementById('emoji');
    const phrases = ['ç»™ä½ ä¸€ä¸ªå°æƒŠå–œ','ä»Šå¤©è¿æ°”ä¸é”™âœ¨','åˆ«æ€¥ï¼Œç¬‘ä¸€ä¸ªğŸ˜„','ä½ å€¼å¾—è¢«å® çˆ±']
    let pi=0;
    function typePhrase(){ const txt = phrases[pi%phrases.length]; title.textContent = '';
      let i=0; const t = setInterval(()=>{ title.textContent = txt.slice(0,i+1); i++; if(i>=txt.length){ clearInterval(t); pi++; setTimeout(typePhrase,1800);} }, 80);
    }
    typePhrase();

    // button handlers
    document.getElementById('party').addEventListener('click', (e)=>{
      const rect = e.target.getBoundingClientRect();
      spawn(40, rect.left + rect.width/2, rect.top + rect.height/2);
      // bounce emoji
      emojiBox.animate([{transform:'scale(1)'},{transform:'scale(1.6)'},{transform:'scale(1)'}],{duration:600,easing:'cubic-bezier(.2,.9,.2,1)'});
      // tiny vibration hint on supported phones
      if(navigator.vibrate) navigator.vibrate([30,20,30]);
    });

    let style = 0;
    document.getElementById('toggle').addEventListener('click', ()=>{
      style = (style+1)%3;
      if(style===0){ document.body.style.background='linear-gradient(135deg,#0f172a,#0b1220)'; emojiBox.textContent='âœ¨'; document.getElementById('sub').textContent='æŠŠå±å¹•ç‚¹ä¸€ä¸‹ï¼Œå½©å¸¦ä¼šé£ï¼Œæ–‡å­—ä¼šè·³ â€”â€” ä¹Ÿè®¸è¿˜èƒ½è®©æˆ‘çŸ¥é“ä½ ç¬‘äº† ğŸ˜Š'; }
      else if(style===1){ document.body.style.background='linear-gradient(135deg,#06133f,#032f2f)'; emojiBox.textContent='ğŸµ'; document.getElementById('sub').textContent='å¬ä¸€æ®µå¾®å¦™çš„æ—‹å¾‹ï¼Œè·Ÿæˆ‘æ‘‡æ‘†ä¸€ä¸‹ï¼'; spawn(30); }
      else { document.body.style.background='linear-gradient(135deg,#350035,#6b1232)'; emojiBox.textContent='ğŸ”¥'; document.getElementById('sub').textContent='çƒ­æƒ…å¦‚ç«ï¼Œç‚¹ç‡ƒä»Šå¤©çš„å¥½å¿ƒæƒ…ï¼'; spawn(60); }
    });

    // also spawn confetti when user taps anywhere
    addEventListener('pointerdown', (e)=>{ spawn(18, e.clientX, e.clientY); });

    // accessibility: if opened with ?name=xxx show name
    const params = new URLSearchParams(location.search);
    const n = params.get('name'); if(n){ emojiBox.textContent='ğŸ‘‹'; document.getElementById('title').textContent = `Hi, ${decodeURIComponent(n)}!`; }

    // friendly share hint: allow screenshot-like link
    // nothing else needed
  </script>
</body>
</html>
